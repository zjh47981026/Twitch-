{"ast":null,"code":"import React from'react';import{Button,Card,List,message,Tabs,Tooltip}from'antd';import{StarOutlined,StarFilled}from'@ant-design/icons';import{addFavoriteItem,deleteFavoriteItem}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TabPane=Tabs.TabPane;var tabKeys={Streams:'stream',Videos:'videos',Clips:'clips'};var processUrl=function processUrl(url){return url.replace('%{height}','252').replace('%{width}','480').replace('{height}','252').replace('{width}','480');};var renderCardTitle=function renderCardTitle(item,loggedIn,favs,favOnChange){var title=\"\".concat(item.broadcaster_name,\" - \").concat(item.title);var isFav=favs.find(function(fav){return fav.id===item.id;});var favOnClick=function favOnClick(){if(isFav){deleteFavoriteItem(item).then(function(){favOnChange();}).catch(function(err){message.error(err.message);});return;}addFavoriteItem(item).then(function(){favOnChange();}).catch(function(err){message.error(err.message);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[loggedIn&&/*#__PURE__*/_jsx(Tooltip,{title:isFav?\"Remove from favorite list\":\"Add to favorite list\",children:/*#__PURE__*/_jsx(Button,{shape:\"circle\",icon:isFav?/*#__PURE__*/_jsx(StarFilled,{}):/*#__PURE__*/_jsx(StarOutlined,{}),onClick:favOnClick})}),/*#__PURE__*/_jsx(\"div\",{style:{overflow:'hidden',textOverflow:'ellipsis',width:450},children:/*#__PURE__*/_jsx(Tooltip,{title:title,children:/*#__PURE__*/_jsx(\"span\",{children:title})})})]});};var renderCardGrid=function renderCardGrid(data,loggedIn,favs,favOnChange){return/*#__PURE__*/_jsx(List,{grid:{xs:2,sm:2,md:2,lg:2,xl:2},dataSource:data,renderItem:function renderItem(item){return/*#__PURE__*/_jsx(List.Item,{style:{marginRight:'20px'},children:/*#__PURE__*/_jsx(Card,{title:renderCardTitle(item,loggedIn,favs,favOnChange),children:/*#__PURE__*/_jsx(\"a\",{href:item.url,target:\"_blank\",rel:\"noopener noreferrer\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"Placeholder\",src:processUrl(item.thumbnail_url)})})})});}});};var Home=function Home(_ref){var resources=_ref.resources,loggedIn=_ref.loggedIn,favoriteItems=_ref.favoriteItems,favoriteOnChange=_ref.favoriteOnChange;var VIDEO=resources.VIDEO,STREAM=resources.STREAM,CLIP=resources.CLIP;var favVideos=favoriteItems.VIDEO,favStreams=favoriteItems.STREAM,favClips=favoriteItems.CLIP;return/*#__PURE__*/_jsxs(Tabs,{defaultActiveKey:tabKeys.Streams,children:[/*#__PURE__*/_jsx(TabPane,{tab:\"Streams\",style:{height:'680px',overflow:'auto'},forceRender:true,children:renderCardGrid(STREAM,loggedIn,favStreams,favoriteOnChange)},tabKeys.Streams),/*#__PURE__*/_jsx(TabPane,{tab:\"Videos\",style:{height:'680px',overflow:'auto'},forceRender:true,children:renderCardGrid(VIDEO,loggedIn,favVideos,favoriteOnChange)},tabKeys.Videos),/*#__PURE__*/_jsx(TabPane,{tab:\"Clips\",style:{height:'680px',overflow:'auto'},forceRender:true,children:renderCardGrid(CLIP,loggedIn,favClips,favoriteOnChange)},tabKeys.Clips)]});};export default Home;","map":{"version":3,"sources":["/Users/zhangjiahao/jupiter/frontend/twitchfe/src/components/Home.js"],"names":["React","Button","Card","List","message","Tabs","Tooltip","StarOutlined","StarFilled","addFavoriteItem","deleteFavoriteItem","TabPane","tabKeys","Streams","Videos","Clips","processUrl","url","replace","renderCardTitle","item","loggedIn","favs","favOnChange","title","broadcaster_name","isFav","find","fav","id","favOnClick","then","catch","err","error","overflow","textOverflow","width","renderCardGrid","data","xs","sm","md","lg","xl","marginRight","thumbnail_url","Home","resources","favoriteItems","favoriteOnChange","VIDEO","STREAM","CLIP","favVideos","favStreams","favClips","height"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Button, Card, List, message, Tabs, Tooltip } from 'antd';\nimport { StarOutlined, StarFilled } from '@ant-design/icons';\nimport { addFavoriteItem, deleteFavoriteItem } from '../utils';\n \nconst { TabPane } = Tabs;\nconst tabKeys = {\n  Streams: 'stream',\n  Videos: 'videos',\n  Clips: 'clips',\n}\n \nconst processUrl = (url) => url\n  .replace('%{height}', '252')\n  .replace('%{width}', '480')\n  .replace('{height}', '252')\n  .replace('{width}', '480');\n \nconst renderCardTitle = (item, loggedIn, favs, favOnChange) => {\n  const title = `${item.broadcaster_name} - ${item.title}`;\n \n  const isFav = favs.find((fav) => fav.id === item.id);\n \n  const favOnClick = () => {\n    if (isFav) {\n      deleteFavoriteItem(item).then(() => {\n        favOnChange();\n      }).catch(err => {\n        message.error(err.message)\n      })\n \n      return;\n    }\n \n    addFavoriteItem(item).then(() => {\n      favOnChange();\n    }).catch(err => {\n      message.error(err.message)\n    })\n  }\n \n  return (\n    <>\n      {\n        loggedIn &&\n        <Tooltip title={isFav ? \"Remove from favorite list\" : \"Add to favorite list\"}>\n          <Button shape=\"circle\" icon={isFav ? <StarFilled /> : <StarOutlined />} onClick={favOnClick} />\n        </Tooltip>\n      }\n      <div style={{ overflow: 'hidden', textOverflow: 'ellipsis', width: 450 }}>\n        <Tooltip title={title}>\n          <span>{title}</span>\n        </Tooltip>\n      </div>\n    </>\n  )\n}\n \nconst renderCardGrid = (data, loggedIn, favs, favOnChange) => {\n  return (\n    <List\n      grid={{\n        xs: 2,\n        sm: 2,\n        md: 2,\n        lg: 2,\n        xl: 2,\n      }}\n      dataSource={data}\n      renderItem={item => (\n        <List.Item style={{ marginRight: '20px' }}>\n          <Card\n            title={renderCardTitle(item, loggedIn, favs, favOnChange)}\n          >\n            <a href={item.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              <img \n                alt=\"Placeholder\"\n                src={processUrl(item.thumbnail_url)}\n              />\n            </a>\n          </Card>\n        </List.Item>\n      )}\n    />\n  )\n}\n \nconst Home = ({ resources, loggedIn, favoriteItems, favoriteOnChange }) => {\n  const { VIDEO, STREAM, CLIP } = resources;\n  const { VIDEO: favVideos, STREAM: favStreams, CLIP: favClips} = favoriteItems;\n \n  return (\n    <Tabs \n      defaultActiveKey={tabKeys.Streams} \n    >\n      <TabPane tab=\"Streams\" key={tabKeys.Streams} style={{ height: '680px', overflow: 'auto' }} forceRender={true}>\n        {renderCardGrid(STREAM, loggedIn, favStreams, favoriteOnChange)}\n      </TabPane>\n      <TabPane tab=\"Videos\" key={tabKeys.Videos} style={{ height: '680px', overflow: 'auto' }} forceRender={true}>\n        {renderCardGrid(VIDEO, loggedIn, favVideos, favoriteOnChange)}\n      </TabPane>\n      <TabPane tab=\"Clips\" key={tabKeys.Clips} style={{ height: '680px', overflow: 'auto' }} forceRender={true}>\n        {renderCardGrid(CLIP, loggedIn, favClips, favoriteOnChange)}\n      </TabPane>\n    </Tabs>\n  );\n}\n \nexport default Home;\n"]},"metadata":{},"sourceType":"module"}